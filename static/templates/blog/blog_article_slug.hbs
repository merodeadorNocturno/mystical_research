<body>
    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-spinner"></div>
    </div>

    {{> nav}}

    <section class="main_container">

        <!-- <aside class="ad-container">
            <div class="ad-content">
                <div class="ad-banner">Sponsored Content</div>
            </div>
        </aside> -->
        <!-- Main Content -->
        <main class="post-container immersive">
            <article class="post-content">
                <!-- Featured Image with Overlay -->
                <div class="post-featured-image immersive">
                    <img src="/static/img/{{article.image_urls}}" loading="lazy" />
                    <div class="image-overlay"></div>
                </div>

                <!-- Introduction -->
                <section class="post-intro">
                    <p>
                        {{{article.summary}}}
                    </p>
                </section>

                <!-- <aside class="ad-container">
                    <div class="ad-content">
                        <div class="ad-banner">Sponsored Content</div>
                    </div>
                </aside> -->

                <!-- Interactive Table of Contents -->
                <aside class="post-toc immersive">
                    <h3>Table of Contents</h3>
                    <ul>
                        {{#each table_of_contents}}
                            <li><a href="#{{this}}">{{this}}</a></li>
                        {{/each}}
                    </ul>
                </aside>

                <!-- Blog Sections -->
                <section id="history">
                    <h2>{{article.title}}</h2>
                    <!-- <div class="image-gallery">
                        <img
                            src="/static/img/tarot-placeholder.jpeg"
                            alt="Ancient tarot cards"
                            loading="lazy"
                        />
                        <img
                            src="/static/img/deck-logo.jpg"
                            alt="Historical tarot deck"
                            loading="lazy"
                        />
                    </div> -->
                </section>

                <section id="cards">
                    <p>
                        {{{article.content}}}
                    </p>
                    <!-- <div class="card-grid">
                        <div class="card-example">
                            <img
                                src="/static/img/tarot-major-arcana.jpg"
                                alt="Major Arcana"
                                loading="lazy"
                            />
                            <p>Major Arcana</p>
                        </div>
                        <div class="card-example">
                            <img
                                src="/static/img/minor-arcana.jpg"
                                alt="Minor Arcana"
                                loading="lazy"
                            />
                            <p>Minor Arcana</p>
                        </div>
                    </div> -->
                </section>

                <!-- <aside class="ad-container">
                    <div class="ad-content">
                        <div class="ad-banner">Sponsored Content</div>
                    </div>
                </aside> -->

                <section id="spreads">
                    <h2>Keywords</h2>
                    {{#each keywords}}
                        <span>{{this}}</span>
                    {{/each}}
                    <!-- <div class="spread-example">
                        <img
                            src="/static/img/tarot-celtic-cross-spread.jpg"
                            alt="Celtic Cross Spread"
                            loading="lazy"
                        />
                        <p>The Celtic Cross is one of the most popular tarot spreads.</p>
                    </div> -->
                </section>

                <!--
            <section id="tips">
            <h2>Tips for Beginners</h2>
            <p>
                Starting your tarot journey can be overwhelming, but here are some
                tips...
            </p>
            <ul class="tips-list">
                <li>Start with a simple deck.</li>
                <li>Practice daily readings.</li>
                <li>Keep a tarot journal.</li>
            </ul>
            </section> -->
            </article>

            <!-- Author Bio -->
            <aside class="author-bio immersive">
                <div class="author-image">
                    <img src="/static/img/avatar1.jpeg" alt="{{article.author}}" loading="lazy" />
                </div>
                <div class="author-details">
                    <h3>About the Author</h3>
                    <p>
                        <strong>{{article.author}}</strong>
                    </p>
                </div>
            </aside>
        </main>
    </section>

    <section class="newsletter" id="newsletter_form_container">
    {{> newsletter_section }}
    </section>

    {{> footer}}

    <script>
      document.addEventListener('htmx:beforeRequest', function(event) {
        const loadingOverlay = document.getElementById('loading-overlay');
        if (loadingOverlay) {
          loadingOverlay.style.display = 'block'; // Show loading overlay
        }
      });

      document.addEventListener('htmx:afterSettle', function(event) {
        const loadingOverlay = document.getElementById('loading-overlay');
        if (loadingOverlay) {
          loadingOverlay.style.display = 'none'; // Hide loading overlay after content is loaded
        }
      });

      document.addEventListener('htmx:responseError', function(event) {
        const loadingOverlay = document.getElementById('loading-overlay');
        if (loadingOverlay) {
          loadingOverlay.style.display = 'none'; // Hide loading overlay on error as well
        }
      });
    </script>

</body>
